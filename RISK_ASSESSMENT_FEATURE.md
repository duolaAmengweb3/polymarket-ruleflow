# 🎯 风险评估系统 - 核心竞争力

## 📌 为什么需要这个功能？

### 问题：
用户可以直接把规则复制到ChatGPT，免费得到类似的流程图。
**我们只省了30秒，这不够构成护城河。**

### 解决方案：
**风险评估系统** - 这是AI对话做不到的！

单次AI对话只能"理解"这个市场，但**风险评估需要：**
- ✅ 结构化的评分算法
- ✅ 多维度规则分析
- ✅ 行业知识积累（什么数据源可靠、什么条款危险）
- ✅ 持续迭代优化

---

## ✨ 功能亮点

### 1. 规则清晰度评分（0-100）
```
🟢 80-100分：低风险，规则清晰
🟡 60-79分：中等风险，存在模糊条款
🔴 0-59分：高风险，需高度谨慎
```

### 2. 八大维度分析

#### ① 规则长度与复杂度
- 太短（<200字）：可能缺少重要细节 (-15分)
- 太长（>2000字）：包含大量条件分支 (-10分)
- 适中：详细且清晰 (加分)

#### ② 时间模糊性检测
- 模糊表述："约"、"大概"、"around" (-15分)
- 无明确时间戳但有deadline (-10分)
- 明确UTC时间戳 (加分)

#### ③ 数据源可靠性
- **可靠**：Federal Reserve、官方.gov网站、Bloomberg (+分)
- **不可靠**：Twitter投票、Reddit社区 (-25分)
- **未指定**：无数据源 (-20分)

#### ④ 条件分支复杂度
- 5个以上if/unless/fallback分支 (-15分)
- 2-5个条件分支 (-5分)
- 包含exception条款 (每个-3分)
- 有fallback机制 (加分)

#### ⑤ Event市场选项数量
- 10+个选项：验证复杂 (-5分)
- 2-10个：清晰 (加分)

#### ⑥ 数值精度规则
- 明确舍入规则 (加分)
- 使用标准basis points (加分)
- 有百分比但无舍入说明 (-5分)

#### ⑦ 歧义词汇检测
```javascript
危险词汇：may, might, could, possibly, significant, substantial
每个词 -3分
```

#### ⑧ 验证难度
- **主观判断**："认为"、"视为"、"opinion" (-20分，高争议风险)
- **客观数据**："price"、"official announcement" (加分)

---

## 🎨 UI展示

### 评分卡片
```
┌─────────────────────────────────────────┐
│ 规则清晰度评分        🟡 72/100 中等风险│
│                                         │
│ ⚠️ 风险因素:                            │
│ • 数据源是社交媒体投票，主观性风险高     │
│ • 包含3个条件分支，逻辑复杂             │
│                                         │
│ 💡 注意事项:                            │
│ • 时间截止表述模糊                       │
│ • 包含3个例外条款                       │
│                                         │
│ ✅ 优势:                               │
│ • 有明确的fallback机制                  │
│ • 规则长度适中，详细且清晰              │
└─────────────────────────────────────────┘
```

### 三色评分系统
- 🟢 **绿色 (80-100)**: Low Risk - 规则清晰，争议概率低
- 🟡 **黄色 (60-79)**: Medium Risk - 存在模糊条款，需仔细阅读
- 🔴 **红色 (0-59)**: High Risk - 规则复杂或需主观判断，需高度谨慎

---

## 💡 真实案例

### 案例1：高风险市场
```
问题: "Will Elon Musk be considered the most influential CEO?"
评分: 45/100 🔴

风险因素:
- 需要主观判断"most influential" (-20分)
- 数据源是Twitter投票 (-25分)
- 无明确评判标准 (-10分)

结论: 高争议风险，不建议大额下注
```

### 案例2：低风险市场
```
问题: "Fed Rate Decision - October 2024"
评分: 88/100 🟢

优势:
- 数据源是Federal Reserve官网 (+10分)
- 明确使用basis points标准
- 有清晰的舍入规则
- 时间戳精确到UTC

结论: 规则清晰可靠，适合交易
```

---

## 🔥 为什么这是护城河？

### 1. 结构化算法 vs AI对话
| 对比项 | ChatGPT单次对话 | RuleFlow风险系统 |
|--------|----------------|-----------------|
| 评分标准 | ❌ 每次不同 | ✅ 一致算法 |
| 多维分析 | ❌ 需引导prompt | ✅ 自动8维扫描 |
| 行业知识 | ❌ 通用知识 | ✅ Polymarket专业知识 |
| 持续优化 | ❌ 无法迭代 | ✅ 基于数据优化 |

### 2. 专业知识积累
我们的系统"知道"：
- Federal Reserve是可靠数据源
- Twitter投票不可靠
- "basis points"是标准表述
- "approximately"会引发争议

**这些是靠积累的行业经验，不是AI一次对话能给的。**

### 3. 可持续迭代
```typescript
// 未来可以加入：
- 历史争议案例数据库
- 创建者信用评分
- 实时数据源监控
- 社区争议标注
```

---

## 📊 用户价值

### 对于新手：
"这个市场能不能玩？风险大不大？"
→ **一眼看懂：72分，黄色，中等风险**

### 对于老手：
"哪些规则条款可能出问题？"
→ **详细列出：时间模糊、数据源不可靠、3个edge cases**

### 对于专业玩家：
"我应该规避哪些市场？"
→ **筛选：只看80分以上的低风险市场**

---

## 🚀 下一步优化方向

### Phase 2 (可选):
1. **历史数据验证**
   - "类似规则的市场，历史争议率12%"

2. **创建者评分**
   - "该创建者过去有2次争议决策"

3. **套利检测**
   - "规则A和规则B有1小时时差，存在套利空间"

---

## 📝 技术实现

### 文件位置
```
utils/riskAssessment.ts - 核心评分算法
app/page.tsx - UI集成展示
```

### 关键函数
```typescript
assessMarketRisk(
  question: string,
  description: string,
  resolutionSource?: string,
  markets?: Array<{question: string}>
): RiskAssessment

返回:
{
  score: 72,              // 0-100评分
  level: 'medium',        // low/medium/high
  risks: [...],           // 风险因素列表
  warnings: [...],        // 注意事项列表
  strengths: [...]        // 优势列表
}
```

---

## 💬 营销话术

### 更新后的推文：
```
同一个Fed市场：

普通人：复制规则 → 问ChatGPT → 得到流程图 ✅

专业玩家：用RuleFlow →
  📊 流程图 ✅
  🎯 风险评分: 88/100 (低风险) ✅
  ⚠️  风险提示: 无 ✅
  💡 注意事项: 2小时内通常会resolve ✅

差距在这里 👆
```

---

## ✅ 完成状态

- [x] 核心评分算法（8维分析）
- [x] UI展示组件
- [x] 中英文双语支持
- [x] 响应式设计
- [x] 三色风险等级系统
- [x] 详细风险分类（风险/警告/优势）

**状态**: ✅ 已上线
**访问**: http://localhost:3000

---

**这才是我们的护城河！** 🏰
