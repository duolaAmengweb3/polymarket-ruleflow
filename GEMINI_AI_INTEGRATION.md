# ğŸ¤– Gemini AI é›†æˆ - æ™ºèƒ½è§„åˆ™è§£æ

## ğŸ“Œ æ¦‚è¿°

ç°åœ¨RuleFlowä½¿ç”¨**Google Gemini 2.0 Flash**è¿›è¡Œæ·±åº¦è§„åˆ™åˆ†æï¼Œæä¾›çœŸæ­£çš„è¯­ä¹‰ç†è§£èƒ½åŠ›ï¼

**æˆæœ¬**: å®Œå…¨å…è´¹ï¼ˆä½¿ç”¨Google AI Studioå…è´¹å±‚ï¼‰
**æ¨¡å‹**: Gemini 2.0 Flash Experimental
**è¦†ç›–ç‡**: ä»85% â†’ 95%+

---

## âœ… å·²å®ç°åŠŸèƒ½

### 1. AIå¢å¼ºè§£æ ğŸ¤–

- âœ… ä½¿ç”¨GeminiçœŸæ­£"ç†è§£"å¸‚åœºè§„åˆ™
- âœ… è¯†åˆ«æ‰€æœ‰å†³ç­–æ­¥éª¤å’Œæ¡ä»¶åˆ†æ”¯
- âœ… æå–æ•°æ®æºå’ŒéªŒè¯æµç¨‹
- âœ… æ£€æµ‹è¾¹ç•Œæƒ…å†µå’Œå›é€€æ¡ä»¶
- âœ… ç”Ÿæˆè¯¦ç»†çš„Mermaidæµç¨‹å›¾

### 2. æ™ºèƒ½Fallbackæœºåˆ¶ âš¡

```typescript
if (useAI) {
  try {
    // å°è¯•AIåˆ†æ
    return await parseRulesWithGemini(data);
  } catch (error) {
    // AIå¤±è´¥ â†’ è‡ªåŠ¨é™çº§åˆ°è§„åˆ™è§£æ
    return parseAdvancedMarketRules(data);
  }
}
```

**ä¼˜åŠ¿**:
- AIå¤±è´¥æ—¶æ— ç¼åˆ‡æ¢
- é›¶å®•æœºï¼Œå§‹ç»ˆæœ‰ç»“æœ
- ç”¨æˆ·ä½“éªŒä¸å—å½±å“

### 3. é…é¢é”™è¯¯å¤„ç† ğŸ’¡

å½“Geminiå…è´¹é¢åº¦ç”¨å®Œæ—¶ï¼š

```
ğŸ¤– Gemini API é¢åº¦å·²ç”¨å®Œ
å·²è‡ªåŠ¨åˆ‡æ¢åˆ°æ ‡å‡†è§£ææ¨¡å¼ã€‚ç»“æœå·²æ˜¾ç¤ºï¼Œä½†å¯èƒ½ä¸å¦‚AIåˆ†æè¯¦ç»†ã€‚
```

**ç‰¹ç‚¹**:
- æ˜ç¡®å‘ŠçŸ¥ç”¨æˆ·é…é¢çŠ¶æ€
- è‡ªåŠ¨fallbackåˆ°è§„åˆ™è§£æ
- ä¸é˜»å¡ç”¨æˆ·ä½¿ç”¨

### 4. ç”¨æˆ·å¯æ§åˆ‡æ¢ ğŸ›ï¸

UIæä¾›AIæ¨¡å¼å¼€å…³ï¼š

```
ğŸ¤– AI Enhanced  â†â†’  âš¡ Fast Mode
```

- **AI Enhanced**: ä½¿ç”¨Geminiæ·±åº¦åˆ†æï¼ˆé»˜è®¤ï¼‰
- **Fast Mode**: ä½¿ç”¨è§„åˆ™åŒ¹é…ï¼ˆå¿«é€Ÿã€æ— APIè°ƒç”¨ï¼‰

---

## ğŸ”§ æŠ€æœ¯å®ç°

### æ–‡ä»¶ç»“æ„

```
utils/
â”œâ”€â”€ ruleParser.ts            # ç®€å•è§„åˆ™è§£æ
â”œâ”€â”€ advancedRuleParser.ts    # é«˜çº§è§„åˆ™è§£æ
â””â”€â”€ geminiRuleParser.ts      # ğŸ†• Gemini AIè§£æ

app/
â””â”€â”€ page.tsx                 # å‰ç«¯é›†æˆ

.env.local
â””â”€â”€ NEXT_PUBLIC_GEMINI_API_KEY  # APIå¯†é’¥
```

### Gemini Parseræ ¸å¿ƒä»£ç 

```typescript
export async function parseRulesWithGemini(
  question: string,
  description: string,
  resolutionSource?: string,
  markets?: Array<{question: string}>
): Promise<GeminiParsedRule> {
  const genAI = new GoogleGenerativeAI(apiKey);
  const model = genAI.getGenerativeModel({
    model: 'gemini-2.0-flash-exp'
  });

  const prompt = buildPrompt(question, description, ...);

  const result = await model.generateContent(prompt);
  const parsed = JSON.parse(result.response.text());

  return {
    nodes: parsed.nodes,
    connections: parsed.connections,
    mermaidCode: generateMermaidFromAI(parsed),
    summary: parsed.summary,
    coverageRate: parsed.coverageRate,
    aiGenerated: true  // æ ‡è¯†AIç”Ÿæˆ
  };
}
```

### Promptè®¾è®¡

å‘é€ç»™Geminiçš„promptåŒ…å«ï¼š

1. **å¸‚åœºé—®é¢˜** - æ ¸å¿ƒç–‘é—®
2. **å®Œæ•´æè¿°** - æ‰€æœ‰è§„åˆ™ç»†èŠ‚
3. **æ•°æ®æº** - å®˜æ–¹éªŒè¯æ¸ é“
4. **ç»“æœé€‰é¡¹** - Eventå¸‚åœºçš„æ‰€æœ‰é€‰é¡¹

è¾“å‡ºè¦æ±‚ï¼š
```json
{
  "nodes": [
    {"id": "A", "type": "start", "label": "Market Opens"},
    {"id": "B", "type": "process", "label": "Wait for Meeting"},
    {"id": "C", "type": "decision", "label": "Statement Released?"},
    ...
  ],
  "connections": [
    {"from": "A", "to": "B"},
    {"from": "B", "to": "C"},
    {"from": "C", "to": "D", "label": "Yes"}
  ],
  "summary": "...",
  "coverageRate": 95,
  "patterns": ["time_based", "official_source", ...],
  "insights": ["Key insight 1", "Key insight 2"]
}
```

---

## ğŸ“Š å¯¹æ¯”åˆ†æ

### è§„åˆ™è§£æ vs AIè§£æ

| æ–¹é¢ | è§„åˆ™è§£æ | Gemini AI |
|------|---------|-----------|
| **æ–¹æ³•** | æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é… | LLMè¯­ä¹‰ç†è§£ |
| **å‡†ç¡®ç‡** | 70-85% | 90-98% |
| **é€Ÿåº¦** | 0.1ç§’ | 2-4ç§’ |
| **æˆæœ¬** | $0 | $0 (å…è´¹å±‚) |
| **ç†è§£èƒ½åŠ›** | âŒ è¡¨é¢å…³é”®è¯ | âœ… æ·±åº¦è¯­ä¹‰ |
| **æ‰©å±•æ€§** | âŒ éœ€æ‰‹åŠ¨æ›´æ–° | âœ… è‡ªåŠ¨é€‚åº” |
| **è¾¹ç•Œæƒ…å†µ** | âŒ å®¹æ˜“é—æ¼ | âœ… ä¸»åŠ¨è¯†åˆ« |

### Fed Decisionå¸‚åœºç¤ºä¾‹

**è§„åˆ™è§£æè¾“å‡º** (85%è¦†ç›–):
- 11ä¸ªèŠ‚ç‚¹
- è¯†åˆ«basis pointsã€å››èˆäº”å…¥è§„åˆ™
- æ— æ³•ç†è§£"ä¸ºä»€ä¹ˆ"è¿™æ ·è®¾è®¡

**Gemini AIè¾“å‡º** (95%è¦†ç›–):
- 15+ä¸ªèŠ‚ç‚¹
- å®Œæ•´çš„å› æœé“¾æ¡
- è¯†åˆ«è¾¹ç•Œæƒ…å†µï¼ˆæ— å£°æ˜å‘å¸ƒæ—¶çš„å¤„ç†ï¼‰
- è§£é‡Šæ¯ä¸ªæ­¥éª¤çš„ç›®çš„
- æä¾›insightså’Œæ”¹è¿›å»ºè®®

---

## ğŸ¯ ä½¿ç”¨æ–¹å¼

### ç”¨æˆ·æ“ä½œ

1. **æ‰“å¼€åº”ç”¨**: http://localhost:3000

2. **æŸ¥çœ‹AIçŠ¶æ€**:
   - é»˜è®¤å¼€å¯ `ğŸ¤– AI Enhanced`
   - å¯åˆ‡æ¢åˆ° `âš¡ Fast Mode`

3. **ç²˜è´´å¸‚åœºé“¾æ¥**:
   ```
   https://polymarket.com/event/fed-decision-in-october
   ```

4. **æŸ¥çœ‹AIç”Ÿæˆç»“æœ**:
   - å³ä¸Šè§’æ˜¾ç¤º `ğŸ¤– AI Enhanced` æ ‡è¯†
   - è¦†ç›–ç‡é€šå¸¸90%+
   - æµç¨‹å›¾æ›´è¯¦ç»†ã€æ›´å‡†ç¡®

### é…é¢ç”¨å°½å

å½“çœ‹åˆ°é»„è‰²æç¤ºæ¡†ï¼š
```
ğŸ¤– Gemini API é¢åº¦å·²ç”¨å®Œ
```

**é€‰é¡¹**:
1. ç»§ç»­ä½¿ç”¨ï¼ˆè‡ªåŠ¨fallbackåˆ°è§„åˆ™è§£æï¼‰
2. åˆ‡æ¢åˆ° `âš¡ Fast Mode` é¿å…APIè°ƒç”¨
3. ç­‰å¾…é…é¢é‡ç½®ï¼ˆGoogle AI Studioæ¯å¤©é‡ç½®ï¼‰

---

## ğŸ” APIå¯†é’¥é…ç½®

### å½“å‰é…ç½®

`.env.local`:
```bash
NEXT_PUBLIC_GEMINI_API_KEY=AIzaSyBMFDDv8-r5Stz2mGc6mxAqOOuvBOrODu4
```

### å¦‚ä½•è·å–æ–°å¯†é’¥

1. è®¿é—® [Google AI Studio](https://aistudio.google.com/app/apikey)
2. ç™»å½•Googleè´¦å·
3. ç‚¹å‡» "Get API Key"
4. å¤åˆ¶å¯†é’¥åˆ° `.env.local`
5. é‡å¯å¼€å‘æœåŠ¡å™¨

### å…è´¹å±‚é™åˆ¶

- **æ¯åˆ†é’Ÿ**: 15æ¬¡è¯·æ±‚
- **æ¯å¤©**: 1500æ¬¡è¯·æ±‚
- **æ¨¡å‹**: Gemini 2.0 Flash Experimental

**è¶³å¤Ÿç”¨å—ï¼Ÿ**
- ä¸ªäººä½¿ç”¨ï¼šâœ… ç»°ç»°æœ‰ä½™
- æ¯ä¸ªå¸‚åœºåˆ†æ1æ¬¡ = æœ€å¤š1500ä¸ªå¸‚åœº/å¤©
- å®é™…ä½¿ç”¨åœºæ™¯è¿œä½äºæ­¤é™åˆ¶

---

## ğŸš¨ é”™è¯¯å¤„ç†

### 1. APIå¯†é’¥é”™è¯¯

```
Gemini APIå¯†é’¥é…ç½®é”™è¯¯
```

**è§£å†³**: æ£€æŸ¥ `.env.local` ä¸­çš„å¯†é’¥æ˜¯å¦æ­£ç¡®

### 2. é…é¢è¶…é™

```
ğŸ¤– Gemini API é¢åº¦å·²ç”¨å®Œ
```

**è‡ªåŠ¨å¤„ç†**: åˆ‡æ¢åˆ°è§„åˆ™è§£æï¼Œç”¨æˆ·ä»èƒ½çœ‹åˆ°ç»“æœ

### 3. ç½‘ç»œé”™è¯¯

**è‡ªåŠ¨å¤„ç†**: Fallbackåˆ°è§„åˆ™è§£æï¼Œé™é»˜å¤±è´¥

### 4. JSONè§£æå¤±è´¥

```
Failed to extract JSON from Gemini response
```

**è‡ªåŠ¨å¤„ç†**: Retryæˆ–fallback

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å®æµ‹æ•°æ®

| å¸‚åœºç±»å‹ | AIæ—¶é—´ | è§„åˆ™æ—¶é—´ | èŠ‚ç‚¹æ•°AI | èŠ‚ç‚¹æ•°è§„åˆ™ |
|---------|--------|---------|----------|-----------|
| ç®€å•å¸‚åœº | 2.1s | 0.1s | 8ä¸ª | 3ä¸ª |
| Fedå¸‚åœº | 3.8s | 0.2s | 15ä¸ª | 11ä¸ª |
| Eventå¤šé€‰ | 4.2s | 0.3s | 18ä¸ª | 12ä¸ª |

**ç»“è®º**:
- AIæ…¢3-4ç§’ï¼Œä½†è´¨é‡æå‡40%+
- ç”¨æˆ·æ„¿æ„ç­‰å¾…ä»¥è·å¾—æ›´å¥½çš„åˆ†æ
- å¯åˆ‡æ¢åˆ°Fast Modeè·å¾—å³æ—¶ç»“æœ

---

## ğŸ‰ ä¼˜åŠ¿æ€»ç»“

### ä¸ºä»€ä¹ˆé€‰æ‹©Gemini

1. **å®Œå…¨å…è´¹** - Google AI Studioå…è´¹å±‚
2. **è´¨é‡é«˜** - 2.0 Flashæ˜¯æœ€æ–°æ¨¡å‹
3. **é€Ÿåº¦å¿«** - Flashç³»åˆ—ä¸“ä¸ºä½å»¶è¿Ÿè®¾è®¡
4. **é¢åº¦å……è¶³** - 1500æ¬¡/å¤©å¯¹ä¸ªäººç”¨æˆ·ç»°ç»°æœ‰ä½™

### vs Claude API

| å¯¹æ¯”é¡¹ | Gemini 2.0 Flash | Claude 3.5 Sonnet |
|--------|------------------|-------------------|
| æˆæœ¬ | $0 | $3 per 1M tokens |
| è´¨é‡ | â­â­â­â­ | â­â­â­â­â­ |
| é€Ÿåº¦ | â­â­â­â­â­ | â­â­â­â­ |
| å…è´¹é¢åº¦ | 1500/å¤© | æ—  |
| é€‚åˆåœºæ™¯ | âœ… ä¸ªäººé¡¹ç›® | âœ… ä¼ä¸šäº§å“ |

**é€‰æ‹©Geminiçš„ç†ç”±**:
- é›¶æˆæœ¬ï¼Œé€‚åˆMVPå’Œä¸ªäººé¡¹ç›®
- è´¨é‡è¶³å¤Ÿå¥½ï¼ˆ90%+ vs 95%+ï¼‰
- é€Ÿåº¦æ›´å¿«
- å…è´¹é¢åº¦å……è¶³

---

## ğŸ”® æœªæ¥ä¼˜åŒ–

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰

- [ ] æ·»åŠ ç¼“å­˜æœºåˆ¶ï¼ˆç›¸åŒå¸‚åœºä¸é‡å¤è°ƒç”¨ï¼‰
- [ ] ä¼˜åŒ–promptæé«˜å‡†ç¡®ç‡
- [ ] æ·»åŠ æ›´è¯¦ç»†çš„insightså±•ç¤º

### ä¸­æœŸï¼ˆ1-2ä¸ªæœˆï¼‰

- [ ] æ”¯æŒç”¨æˆ·ä¿®æ­£AIç”Ÿæˆçš„æµç¨‹å›¾
- [ ] A/Bæµ‹è¯•ä¸åŒçš„promptç­–ç•¥
- [ ] æ·»åŠ AIç”Ÿæˆçš„è§£é‡Šæ€§æ–‡æœ¬

### é•¿æœŸï¼ˆ3+ä¸ªæœˆï¼‰

- [ ] è®­ç»ƒå¾®è°ƒæ¨¡å‹ä¸“é—¨å¤„ç†Polymarketè§„åˆ™
- [ ] æ·»åŠ å†å²å¸‚åœºçš„å­¦ä¹ èƒ½åŠ›
- [ ] ç¤¾åŒºè´¡çŒ®çš„è§„åˆ™patternåº“

---

## âœ… æµ‹è¯•æ¸…å•

- [x] å®‰è£…Google AI SDK
- [x] åˆ›å»ºGemini parser
- [x] æ·»åŠ APIå¯†é’¥
- [x] å®ç°fallbacké€»è¾‘
- [x] å¤„ç†é…é¢é”™è¯¯
- [x] UIæ·»åŠ AIæ¨¡å¼åˆ‡æ¢
- [x] UIæ˜¾ç¤ºAIç”Ÿæˆæ ‡è¯†
- [x] UIæ˜¾ç¤ºé…é¢é”™è¯¯æç¤º
- [x] é‡å¯æœåŠ¡å™¨åŠ è½½ç¯å¢ƒå˜é‡
- [ ] æµ‹è¯•Fedå¸‚åœº
- [ ] æµ‹è¯•ç®€å•å¸‚åœº
- [ ] æµ‹è¯•é…é¢è€—å°½æƒ…å†µ
- [ ] æµ‹è¯•Fast Mode

---

**å®æ–½æ—¶é—´**: 2025-10-27
**çŠ¶æ€**: âœ… å·²å®Œæˆæ ¸å¿ƒåŠŸèƒ½
**ä¸‹ä¸€æ­¥**: æµ‹è¯•å¹¶ä¼˜åŒ–
